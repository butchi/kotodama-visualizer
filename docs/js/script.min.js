!function e(n,t,r){function a(f,u){if(!t[f]){if(!n[f]){var i="function"==typeof require&&require;if(!u&&i)return i(f,!0);if(o)return o(f,!0);var l=new Error("Cannot find module '"+f+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[f]={exports:{}};n[f][0].call(c.exports,function(e){var t=n[f][1][e];return a(t?t:e)},c,c.exports,e,n,t,r)}return t[f].exports}for(var o="function"==typeof require&&require,f=0;f<r.length;f++)a(r[f]);return a}({1:[function(e,n,t){/**
 * @license
 *
 * chroma.js - JavaScript library for color conversions
 * 
 * Copyright (c) 2011-2017, Gregor Aisch
 * All rights reserved.
 * 
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 * 
 * 1. Redistributions of source code must retain the above copyright notice, this
 *    list of conditions and the following disclaimer.
 * 
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 * 
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 *    derived from this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 */
(function(){var e,r,a,o,f,u,i,l,c,s,d,p,b,h,g,m,y,v,w,k,_,j,x,O,M,N,A,P,L,C,R,q,D,S,z,E,B,U,T,F,G,H,I,V,Y,X,$,K,Q,Z,J,W,ee,ne,te,re,ae,oe,fe,ue,ie,le,ce,se,de,pe,be,he,ge,ye,ve,we,ke,_e,je,xe,Oe,Me,Ne,Ae,Pe,Le,Ce,Re=[].slice;Ne=function(){var e,n,t,r,a;for(e={},a="Boolean Number String Function Array Date RegExp Undefined Null".split(" "),r=0,n=a.length;r<n;r++)t=a[r],e["[object "+t+"]"]=t.toLowerCase();return function(n){var t;return t=Object.prototype.toString.call(n),e[t]||"object"}}(),K=function(e,n,t){return null==n&&(n=0),null==t&&(t=1),e<n&&(e=n),e>t&&(e=t),e},Ae=function(e){return e.length>=3?[].slice.call(e):e[0]},_=function(e){var n,t;for(e._clipped=!1,e._unclipped=e.slice(0),n=t=0;t<3;n=++t)n<3?((e[n]<0||e[n]>255)&&(e._clipped=!0),e[n]<0&&(e[n]=0),e[n]>255&&(e[n]=255)):3===n&&(e[n]<0&&(e[n]=0),e[n]>1&&(e[n]=1));return e._clipped||delete e._unclipped,e},o=Math.PI,_e=Math.round,O=Math.cos,L=Math.floor,ae=Math.pow,Q=Math.log,xe=Math.sin,Oe=Math.sqrt,h=Math.atan2,W=Math.max,b=Math.abs,i=2*o,f=o/3,r=o/180,u=180/o,k=function(){return arguments[0]instanceof e?arguments[0]:function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,arguments,function(){})},k["default"]=k,p=[],"undefined"!=typeof n&&null!==n&&null!=n.exports&&(n.exports=k),"function"==typeof define&&define.amd?define([],function(){return k}):(ke="undefined"!=typeof t&&null!==t?t:this,ke.chroma=k),k.version="1.3.5",d={},c=[],s=!1,e=function(){function e(){var e,n,t,r,a,o,f,u,i;for(o=this,n=[],u=0,r=arguments.length;u<r;u++)e=arguments[u],null!=e&&n.push(e);if(n.length>1&&(f=n[n.length-1]),null!=d[f])o._rgb=_(d[f](Ae(n.slice(0,-1))));else{for(s||(c=c.sort(function(e,n){return n.p-e.p}),s=!0),i=0,a=c.length;i<a&&(t=c[i],!(f=t.test.apply(t,n)));i++);f&&(o._rgb=_(d[f].apply(d,n)))}null==o._rgb&&console.warn("unknown format: "+n),null==o._rgb&&(o._rgb=[0,0,0]),3===o._rgb.length&&o._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e.prototype.clone=function(){return k(me._rgb)},e}(),k._input=d,/**
  	ColorBrewer colors for chroma.js
  
  	Copyright (c) 2002 Cynthia Brewer, Mark Harrower, and The 
  	Pennsylvania State University.
  
  	Licensed under the Apache License, Version 2.0 (the "License"); 
  	you may not use this file except in compliance with the License.
  	You may obtain a copy of the License at	
  	http://www.apache.org/licenses/LICENSE-2.0
  
  	Unless required by applicable law or agreed to in writing, software distributed
  	under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR
  	CONDITIONS OF ANY KIND, either express or implied. See the License for the
  	specific language governing permissions and limitations under the License.
  
      @preserve
   */
k.brewer=v={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,n;n=[];for(e in v)n.push(v[e.toLowerCase()]=v[e]);return n}(),Pe={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},k.colors=x=Pe,I=function(){var e,n,t,r,o,f,u,i,l;return n=Ae(arguments),o=n[0],e=n[1],t=n[2],i=(o+16)/116,u=isNaN(e)?i:i+e/500,l=isNaN(t)?i:i-t/200,i=a.Yn*V(i),u=a.Xn*V(u),l=a.Zn*V(l),f=Ce(3.2404542*u-1.5371385*i-.4985314*l),r=Ce(-.969266*u+1.8760108*i+.041556*l),t=Ce(.0556434*u-.2040259*i+1.0572252*l),[f,r,t,n.length>3?n[3]:1]},Ce=function(e){return 255*(e<=.00304?12.92*e:1.055*ae(e,1/2.4)-.055)},V=function(e){return e>a.t1?e*e*e:a.t2*(e-a.t0)},a={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},de=function(){var e,n,t,r,a,o,f,u;return r=Ae(arguments),t=r[0],n=r[1],e=r[2],a=ye(t,n,e),o=a[0],f=a[1],u=a[2],[116*f-16,500*(o-f),200*(f-u)]},ve=function(e){return(e/=255)<=.04045?e/12.92:ae((e+.055)/1.055,2.4)},Le=function(e){return e>a.t3?ae(e,1/3):e/a.t2+a.t0},ye=function(){var e,n,t,r,o,f,u;return r=Ae(arguments),t=r[0],n=r[1],e=r[2],t=ve(t),n=ve(n),e=ve(e),o=Le((.4124564*t+.3575761*n+.1804375*e)/a.Xn),f=Le((.2126729*t+.7151522*n+.072175*e)/a.Yn),u=Le((.0193339*t+.119192*n+.9503041*e)/a.Zn),[o,f,u]},k.lab=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["lab"]),function(){})},d.lab=I,e.prototype.lab=function(){return de(this._rgb)},g=function(e){var n,t,r,a,o,f,u,i,l,c,s;return e=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(k(a));return r}(),2===e.length?(l=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(a.lab());return r}(),o=l[0],f=l[1],n=function(e){var n,t;return t=function(){var t,r;for(r=[],n=t=0;t<=2;n=++t)r.push(o[n]+e*(f[n]-o[n]));return r}(),k.lab.apply(k,t)}):3===e.length?(c=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(a.lab());return r}(),o=c[0],f=c[1],u=c[2],n=function(e){var n,t;return t=function(){var t,r;for(r=[],n=t=0;t<=2;n=++t)r.push((1-e)*(1-e)*o[n]+2*(1-e)*e*f[n]+e*e*u[n]);return r}(),k.lab.apply(k,t)}):4===e.length?(s=function(){var n,t,r;for(r=[],t=0,n=e.length;t<n;t++)a=e[t],r.push(a.lab());return r}(),o=s[0],f=s[1],u=s[2],i=s[3],n=function(e){var n,t;return t=function(){var t,r;for(r=[],n=t=0;t<=2;n=++t)r.push((1-e)*(1-e)*(1-e)*o[n]+3*(1-e)*(1-e)*e*f[n]+3*(1-e)*e*e*u[n]+e*e*e*i[n]);return r}(),k.lab.apply(k,t)}):5===e.length&&(t=g(e.slice(0,3)),r=g(e.slice(2,5)),n=function(e){return e<.5?t(2*e):r(2*(e-.5))}),n},k.bezier=function(e){var n;return n=g(e),n.scale=function(){return k.scale(n)},n},/*
      chroma.js
  
      Copyright (c) 2011-2013, Gregor Aisch
      All rights reserved.
  
      Redistribution and use in source and binary forms, with or without
      modification, are permitted provided that the following conditions are met:
  
      * Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
  
      * Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
  
      * The name Gregor Aisch may not be used to endorse or promote products
        derived from this software without specific prior written permission.
  
      THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
      AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
      IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
      DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
      INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
      BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
      DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
      OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
      NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
      EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  
      @source: https://github.com/gka/chroma.js
   */
k.cubehelix=function(e,n,t,r,a){var o,f,u;return null==e&&(e=300),null==n&&(n=-1.5),null==t&&(t=1),null==r&&(r=1),null==a&&(a=[0,1]),o=0,"array"===Ne(a)?f=a[1]-a[0]:(f=0,a=[a,a]),u=function(u){var l,c,s,d,p,b,h,g,m;return l=i*((e+120)/360+n*u),h=ae(a[0]+f*u,r),b=0!==o?t[0]+u*o:t,c=b*h*(1-h)/2,d=O(l),m=xe(l),g=h+c*(-.14861*d+1.78277*m),p=h+c*(-.29227*d-.90649*m),s=h+c*(1.97294*d),k(_([255*g,255*p,255*s]))},u.start=function(n){return null==n?e:(e=n,u)},u.rotations=function(e){return null==e?n:(n=e,u)},u.gamma=function(e){return null==e?r:(r=e,u)},u.hue=function(e){return null==e?t:(t=e,"array"===Ne(t)?(o=t[1]-t[0],0===o&&(t=t[1])):o=0,u)},u.lightness=function(e){return null==e?a:("array"===Ne(e)?(a=e,f=e[1]-e[0]):(a=[e,e],f=0),u)},u.scale=function(){return k.scale(u)},u.hue(t),u},k.random=function(){var n,t,r,a;for(t="0123456789abcdef",n="#",r=a=0;a<6;r=++a)n+=t.charAt(L(16*Math.random()));return new e(n)},p=[],E=function(e,n,t,r){var a,o,f,u;for(null==t&&(t=.5),null==r&&(r="rgb"),"object"!==Ne(e)&&(e=k(e)),"object"!==Ne(n)&&(n=k(n)),f=0,o=p.length;f<o;f++)if(a=p[f],r===a[0]){u=a[1](e,n,t,r);break}if(null==u)throw"color mode "+r+" is not supported";return u.alpha(e.alpha()+t*(n.alpha()-e.alpha()))},k.interpolate=E,e.prototype.interpolate=function(e,n,t){return E(this,e,n,t)},k.mix=E,e.prototype.mix=e.prototype.interpolate,d.rgb=function(){var e,n,t,r;n=Ae(arguments),t=[];for(e in n)r=n[e],t.push(r);return t},k.rgb=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["rgb"]),function(){})},e.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},e.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},c.push({p:3,test:function(e){var n;return n=Ae(arguments),"array"===Ne(n)&&3===n.length?"rgb":4===n.length&&"number"===Ne(n[3])&&n[3]>=0&&n[3]<=1?"rgb":void 0}}),d.lrgb=d.rgb,T=function(n,t,r,a){var o,f;return o=n._rgb,f=t._rgb,new e(Oe(ae(o[0],2)*(1-r)+ae(f[0],2)*r),Oe(ae(o[1],2)*(1-r)+ae(f[1],2)*r),Oe(ae(o[2],2)*(1-r)+ae(f[2],2)*r),a)},l=function(n){var t,r,a,o,f,u;for(r=1/n.length,u=[0,0,0,0],o=0,a=n.length;o<a;o++)t=n[o],f=t._rgb,u[0]+=ae(f[0],2)*r,u[1]+=ae(f[1],2)*r,u[2]+=ae(f[2],2)*r,u[3]+=f[3]*r;return u[0]=Oe(u[0]),u[1]=Oe(u[1]),u[2]=Oe(u[2]),new e(u)},p.push(["lrgb",T]),k.average=function(e,n){var t,r,a,f,u,i,c,s,d,p,b,g,m;if(null==n&&(n="rgb"),d=e.length,e=e.map(function(e){return k(e)}),c=e.splice(0,1)[0],"lrgb"===n)return l(e);g=c.get(n),f=[],u=0,i=0;for(s in g)g[s]=g[s]||0,f.push(isNaN(g[s])?0:1),"h"!==n.charAt(s)||isNaN(g[s])||(t=g[s]/180*o,u+=O(t),i+=xe(t));for(r=c.alpha(),b=0,p=e.length;b<p;b++){a=e[b],m=a.get(n),r+=a.alpha();for(s in g)isNaN(m[s])||(g[s]+=m[s],f[s]+=1,"h"===n.charAt(s)&&(t=g[s]/180*o,u+=O(t),i+=xe(t)))}for(s in g)if(g[s]=g[s]/f[s],"h"===n.charAt(s)){for(t=h(i/f[s],u/f[s])/o*180;t<0;)t+=360;for(;t>=360;)t-=360;g[s]=t}return k(g,n).alpha(r/d)},R=function(e){var n,t,r,a,o,f;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return 4!==e.length&&7!==e.length||(e=e.substr(1)),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),f=parseInt(e,16),a=f>>16,r=f>>8&255,t=255&f,[a,r,t,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),f=parseInt(e,16),a=f>>24&255,r=f>>16&255,t=f>>8&255,n=_e((255&f)/255*100)/100,[a,r,t,n];if(null!=d.css&&(o=d.css(e)))return o;throw"unknown color: "+e},ie=function(e,n){var t,r,a,o,f,u,i;return null==n&&(n="rgb"),f=e[0],a=e[1],r=e[2],t=e[3],f=Math.round(f),a=Math.round(a),r=Math.round(r),i=f<<16|a<<8|r,u="000000"+i.toString(16),u=u.substr(u.length-6),o="0"+_e(255*t).toString(16),o=o.substr(o.length-2),"#"+function(){switch(n.toLowerCase()){case"rgba":return u+o;case"argb":return o+u;default:return u}}()},d.hex=function(e){return R(e)},k.hex=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["hex"]),function(){})},e.prototype.hex=function(e){return null==e&&(e="rgb"),ie(this._rgb,e)},c.push({p:4,test:function(e){if(1===arguments.length&&"string"===Ne(e))return"hex"}}),S=function(){var e,n,t,r,a,o,f,u,i,l,c,s,d,p;if(e=Ae(arguments),a=e[0],c=e[1],f=e[2],0===c)i=r=n=255*f;else{for(p=[0,0,0],t=[0,0,0],d=f<.5?f*(1+c):f+c-f*c,s=2*f-d,a/=360,p[0]=a+1/3,p[1]=a,p[2]=a-1/3,o=u=0;u<=2;o=++u)p[o]<0&&(p[o]+=1),p[o]>1&&(p[o]-=1),6*p[o]<1?t[o]=s+6*(d-s)*p[o]:2*p[o]<1?t[o]=d:3*p[o]<2?t[o]=s+(d-s)*(2/3-p[o])*6:t[o]=s;l=[_e(255*t[0]),_e(255*t[1]),_e(255*t[2])],i=l[0],r=l[1],n=l[2]}return e.length>3?[i,r,n,e[3]]:[i,r,n]},ce=function(e,n,t){var r,a,o,f,u;return void 0!==e&&e.length>=3&&(f=e,e=f[0],n=f[1],t=f[2]),e/=255,n/=255,t/=255,o=Math.min(e,n,t),W=Math.max(e,n,t),a=(W+o)/2,W===o?(u=0,r=Number.NaN):u=a<.5?(W-o)/(W+o):(W-o)/(2-W-o),e===W?r=(n-t)/(W-o):n===W?r=2+(t-e)/(W-o):t===W&&(r=4+(e-n)/(W-o)),r*=60,r<0&&(r+=360),[r,u,a]},k.hsl=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["hsl"]),function(){})},d.hsl=S,e.prototype.hsl=function(){return ce(this._rgb)},z=function(){var e,n,t,r,a,o,f,u,i,l,c,s,d,p,b,h,g,m;if(e=Ae(arguments),a=e[0],h=e[1],m=e[2],m*=255,0===h)i=r=n=m;else switch(360===a&&(a=0),a>360&&(a-=360),a<0&&(a+=360),a/=60,o=L(a),t=a-o,f=m*(1-h),u=m*(1-h*t),g=m*(1-h*(1-t)),o){case 0:l=[m,g,f],i=l[0],r=l[1],n=l[2];break;case 1:c=[u,m,f],i=c[0],r=c[1],n=c[2];break;case 2:s=[f,m,g],i=s[0],r=s[1],n=s[2];break;case 3:d=[f,u,m],i=d[0],r=d[1],n=d[2];break;case 4:p=[g,f,m],i=p[0],r=p[1],n=p[2];break;case 5:b=[m,f,u],i=b[0],r=b[1],n=b[2]}return[i,r,n,e.length>3?e[3]:1]},se=function(){var e,n,t,r,a,o,f,u,i;return f=Ae(arguments),o=f[0],t=f[1],e=f[2],a=Math.min(o,t,e),W=Math.max(o,t,e),n=W-a,i=W/255,0===W?(r=Number.NaN,u=0):(u=n/W,o===W&&(r=(t-e)/n),t===W&&(r=2+(e-o)/n),e===W&&(r=4+(o-t)/n),r*=60,r<0&&(r+=360)),[r,u,i]},k.hsv=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["hsv"]),function(){})},d.hsv=z,e.prototype.hsv=function(){return se(this._rgb)},te=function(e){var n,t,r;return"number"===Ne(e)&&e>=0&&e<=16777215?(r=e>>16,t=e>>8&255,n=255&e,[r,t,n,1]):(console.warn("unknown num color: "+e),[0,0,0,1])},he=function(){var e,n,t,r;return r=Ae(arguments),t=r[0],n=r[1],e=r[2],(t<<16)+(n<<8)+e},k.num=function(n){return new e(n,"num")},e.prototype.num=function(e){return null==e&&(e="rgb"),he(this._rgb,e)},d.num=te,c.push({p:1,test:function(e){if(1===arguments.length&&"number"===Ne(e)&&e>=0&&e<=16777215)return"num"}}),C=function(){var e,n,t,r,a,o,f,u,i,l,c,s,d,p,b,h,g,m,y,v;if(t=Ae(arguments),u=t[0],a=t[1],n=t[2],a/=100,f=f/100*255,e=255*a,0===a)s=f=r=n;else switch(360===u&&(u=0),u>360&&(u-=360),u<0&&(u+=360),u/=60,i=L(u),o=u-i,l=n*(1-a),c=l+e*(1-o),y=l+e*o,v=l+e,i){case 0:d=[v,y,l],s=d[0],f=d[1],r=d[2];break;case 1:p=[c,v,l],s=p[0],f=p[1],r=p[2];break;case 2:b=[l,v,y],s=b[0],f=b[1],r=b[2];break;case 3:h=[l,c,v],s=h[0],f=h[1],r=h[2];break;case 4:g=[y,l,v],s=g[0],f=g[1],r=g[2];break;case 5:m=[v,l,c],s=m[0],f=m[1],r=m[2]}return[s,f,r,t.length>3?t[3]:1]},ue=function(){var e,n,t,r,a,o,f,u,i;return i=Ae(arguments),u=i[0],a=i[1],n=i[2],f=Math.min(u,a,n),W=Math.max(u,a,n),r=W-f,t=100*r/255,e=f/(255-r)*100,0===r?o=Number.NaN:(u===W&&(o=(a-n)/r),a===W&&(o=2+(n-u)/r),n===W&&(o=4+(u-a)/r),o*=60,o<0&&(o+=360)),[o,t,e]},k.hcg=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["hcg"]),function(){})},d.hcg=C,e.prototype.hcg=function(){return ue(this._rgb)},M=function(e){var n,t,r,a,o,f,u,i;if(e=e.toLowerCase(),null!=k.colors&&k.colors[e])return R(k.colors[e]);if(o=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(u=o.slice(1,4),a=f=0;f<=2;a=++f)u[a]=+u[a];u[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(u=o.slice(1,5),a=i=0;i<=3;a=++i)u[a]=+u[a];else if(o=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(u=o.slice(1,4),a=n=0;n<=2;a=++n)u[a]=_e(2.55*u[a]);u[3]=1}else if(o=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(u=o.slice(1,5),a=t=0;t<=2;a=++t)u[a]=_e(2.55*u[a]);u[3]=+u[3]}else(o=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,u=S(r),u[3]=1):(o=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&(r=o.slice(1,4),r[1]*=.01,r[2]*=.01,u=S(r),u[3]=+o[4]);return u},fe=function(e){var n;return n=e[3]<1?"rgba":"rgb","rgb"===n?n+"("+e.slice(0,3).map(_e).join(",")+")":"rgba"===n?n+"("+e.slice(0,3).map(_e).join(",")+","+e[3]+")":void 0},we=function(e){return _e(100*e)/100},D=function(e,n){var t;return t=n<1?"hsla":"hsl",e[0]=we(e[0]||0),e[1]=we(100*e[1])+"%",e[2]=we(100*e[2])+"%","hsla"===t&&(e[3]=n),t+"("+e.join(",")+")"},d.css=function(e){return M(e)},k.css=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["css"]),function(){})},e.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?fe(this._rgb):"hsl"===e.slice(0,3)?D(this.hsl(),this.alpha()):void 0},d.named=function(e){return R(Pe[e])},c.push({p:5,test:function(e){if(1===arguments.length&&null!=Pe[e])return"named"}}),e.prototype.name=function(e){var n,t;arguments.length&&(Pe[e]&&(this._rgb=R(Pe[e])),this._rgb[3]=1),n=this.hex();for(t in Pe)if(n===Pe[t])return t;return n},Y=function(){var e,n,t,a;return a=Ae(arguments),t=a[0],e=a[1],n=a[2],n*=r,[t,O(n)*e,xe(n)*e]},X=function(){var e,n,t,r,a,o,f,u,i,l,c;return t=Ae(arguments),u=t[0],a=t[1],f=t[2],l=Y(u,a,f),e=l[0],n=l[1],r=l[2],c=I(e,n,r),i=c[0],o=c[1],r=c[2],[i,o,r,t.length>3?t[3]:1]},H=function(){var e,n,t,r,a,o;return o=Ae(arguments),a=o[0],e=o[1],n=o[2],t=Oe(e*e+n*n),r=(h(n,e)*u+360)%360,0===_e(1e4*t)&&(r=Number.NaN),[a,t,r]},pe=function(){var e,n,t,r,a,o,f;return o=Ae(arguments),a=o[0],t=o[1],n=o[2],f=de(a,t,n),r=f[0],e=f[1],n=f[2],H(r,e,n)},k.lch=function(){var n;return n=Ae(arguments),new e(n,"lch")},k.hcl=function(){var n;return n=Ae(arguments),new e(n,"hcl")},d.lch=X,d.hcl=function(){var e,n,t,r;return r=Ae(arguments),n=r[0],e=r[1],t=r[2],X([t,e,n])},e.prototype.lch=function(){return pe(this._rgb)},e.prototype.hcl=function(){return pe(this._rgb).reverse()},oe=function(e){var n,t,r,a,o,f,u,i,l;return null==e&&(e="rgb"),i=Ae(arguments),u=i[0],a=i[1],n=i[2],u/=255,a/=255,n/=255,o=1-Math.max(u,Math.max(a,n)),r=o<1?1/(1-o):0,t=(1-u-o)*r,f=(1-a-o)*r,l=(1-n-o)*r,[t,f,l,o]},j=function(){var e,n,t,r,a,o,f,u,i;return n=Ae(arguments),r=n[0],f=n[1],i=n[2],o=n[3],e=n.length>4?n[4]:1,1===o?[0,0,0,e]:(u=r>=1?0:255*(1-r)*(1-o),a=f>=1?0:255*(1-f)*(1-o),t=i>=1?0:255*(1-i)*(1-o),[u,a,t,e])},d.cmyk=function(){return j(Ae(arguments))},k.cmyk=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["cmyk"]),function(){})},e.prototype.cmyk=function(){return oe(this._rgb)},d.gl=function(){var e,n,t,r,a;for(r=function(){var e,t;e=Ae(arguments),t=[];for(n in e)a=e[n],t.push(a);return t}.apply(this,arguments),e=t=0;t<=2;e=++t)r[e]*=255;return r},k.gl=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["gl"]),function(){})},e.prototype.gl=function(){var e;return e=this._rgb,[e[0]/255,e[1]/255,e[2]/255,e[3]]},be=function(e,n,t){var r;return r=Ae(arguments),e=r[0],n=r[1],t=r[2],e=Z(e),n=Z(n),t=Z(t),.2126*e+.7152*n+.0722*t},Z=function(e){return e/=255,e<=.03928?e/12.92:ae((e+.055)/1.055,2.4)},G=function(n,t,r,a){var o,f;return o=n._rgb,f=t._rgb,new e(o[0]+r*(f[0]-o[0]),o[1]+r*(f[1]-o[1]),o[2]+r*(f[2]-o[2]),a)},p.push(["rgb",G]),e.prototype.luminance=function(e,n){var t,r,a,o;return null==n&&(n="rgb"),arguments.length?(0===e?this._rgb=[0,0,0,this._rgb[3]]:1===e?this._rgb=[255,255,255,this._rgb[3]]:(r=1e-7,a=20,o=function(t,f){var u,i;return i=t.interpolate(f,.5,n),u=i.luminance(),Math.abs(e-u)<r||!a--?i:u>e?o(t,i):o(i,f)},t=be(this._rgb),this._rgb=(t>e?o(k("black"),this):o(this,k("white"))).rgba()),this):be(this._rgb)},Me=function(e){var n,t,r,a;return a=e/100,a<66?(r=255,t=-155.25485562709179-.44596950469579133*(t=a-2)+104.49216199393888*Q(t),n=a<20?0:-254.76935184120902+.8274096064007395*(n=a-10)+115.67994401066147*Q(n)):(r=351.97690566805693+.114206453784165*(r=a-55)-40.25366309332127*Q(r),t=325.4494125711974+.07943456536662342*(t=a-50)-28.0852963507957*Q(t),n=255),[r,t,n]},ge=function(){var e,n,t,r,a,o,f,u,i;for(f=Ae(arguments),o=f[0],t=f[1],e=f[2],a=1e3,r=4e4,n=.4;r-a>n;)i=.5*(r+a),u=Me(i),u[2]/u[0]>=e/o?r=i:a=i;return _e(i)},k.temperature=k.kelvin=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["temperature"]),function(){})},d.temperature=d.kelvin=d.K=Me,e.prototype.temperature=function(){return ge(this._rgb)},e.prototype.kelvin=e.prototype.temperature,k.contrast=function(n,t){var r,a,o,f;return"string"!==(o=Ne(n))&&"number"!==o||(n=new e(n)),"string"!==(f=Ne(t))&&"number"!==f||(t=new e(t)),r=n.luminance(),a=t.luminance(),r>a?(r+.05)/(a+.05):(a+.05)/(r+.05)},k.distance=function(n,t,r){var a,o,f,u,i,l,c;null==r&&(r="lab"),"string"!==(i=Ne(n))&&"number"!==i||(n=new e(n)),"string"!==(l=Ne(t))&&"number"!==l||(t=new e(t)),f=n.get(r),u=t.get(r),c=0;for(o in f)a=(f[o]||0)-(u[o]||0),c+=a*a;return Math.sqrt(c)},k.deltaE=function(n,t,r,a){var f,u,i,l,c,s,d,p,g,m,y,v,w,k,_,j,x,M,N,A,P,L,C,R,q,D,S;for(null==r&&(r=1),null==a&&(a=1),"string"!==(x=Ne(n))&&"number"!==x||(n=new e(n)),"string"!==(M=Ne(t))&&"number"!==M||(t=new e(t)),N=n.lab(),f=N[0],i=N[1],c=N[2],A=t.lab(),u=A[0],l=A[1],s=A[2],d=Oe(i*i+c*c),p=Oe(l*l+s*s),C=f<16?.511:.040975*f/(1+.01765*f),P=.0638*d/(1+.0131*d)+.638,j=d<1e-6?0:180*h(c,i)/o;j<0;)j+=360;for(;j>=360;)j-=360;return R=j>=164&&j<=345?.56+b(.2*O(o*(j+168)/180)):.36+b(.4*O(o*(j+35)/180)),g=d*d*d*d,_=Oe(g/(g+1900)),L=P*(_*R+1-_),k=f-u,w=d-p,y=i-l,v=c-s,m=y*y+v*v-w*w,q=k/(r*C),D=w/(a*P),S=L,Oe(q*q+D*D+m/(S*S))},e.prototype.get=function(e){var n,t,r,a,o,f;return r=this,o=e.split("."),a=o[0],n=o[1],f=r[a](),n?(t=a.indexOf(n),t>-1?f[t]:console.warn("unknown channel "+n+" in mode "+a)):f},e.prototype.set=function(e,n){var t,r,a,o,f,u;if(a=this,f=e.split("."),o=f[0],t=f[1],t)if(u=a[o](),r=o.indexOf(t),r>-1)if("string"===Ne(n))switch(n.charAt(0)){case"+":u[r]+=+n;break;case"-":u[r]+=+n;break;case"*":u[r]*=+n.substr(1);break;case"/":u[r]/=+n.substr(1);break;default:u[r]=+n}else u[r]=n;else console.warn("unknown channel "+t+" in mode "+o);else u=n;return k(u,o).alpha(a.alpha())},e.prototype.clipped=function(){return this._rgb._clipped||!1},e.prototype.alpha=function(e){return arguments.length?k.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},e.prototype.darken=function(e){var n,t;return null==e&&(e=1),t=this,n=t.lab(),n[0]-=a.Kn*e,k.lab(n).alpha(t.alpha())},e.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},e.prototype.darker=e.prototype.darken,e.prototype.brighter=e.prototype.brighten,e.prototype.saturate=function(e){var n,t;return null==e&&(e=1),t=this,n=t.lch(),n[1]+=e*a.Kn,n[1]<0&&(n[1]=0),k.lch(n).alpha(t.alpha())},e.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},e.prototype.premultiply=function(){var e,n;return n=this.rgb(),e=this.alpha(),k(n[0]*e,n[1]*e,n[2]*e,e)},m=function(e,n,t){if(!m[t])throw"unknown blend mode "+t;return m[t](e,n)},y=function(e){return function(n,t){var r,a;return r=k(t).rgb(),a=k(n).rgb(),k(e(r,a),"rgb")}},P=function(e){return function(n,t){var r,a,o;for(o=[],r=a=0;a<=3;r=++a)o[r]=e(n[r],t[r]);return o}},ne=function(e,n){return e},ee=function(e,n){return e*n/255},N=function(e,n){return e>n?n:e},$=function(e,n){return e>n?e:n},je=function(e,n){return 255*(1-(1-e/255)*(1-n/255))},re=function(e,n){return n<128?2*e*n/255:255*(1-2*(1-e/255)*(1-n/255))},w=function(e,n){return 255*(1-(1-n/255)/(e/255))},A=function(e,n){return 255===e?255:(e=255*(n/255)/(1-e/255),e>255?255:e)},m.normal=y(P(ne)),m.multiply=y(P(ee)),m.screen=y(P(je)),m.overlay=y(P(re)),m.darken=y(P(N)),m.lighten=y(P($)),m.dodge=y(P(A)),m.burn=y(P(w)),k.blend=m,k.analyze=function(e){var n,t,r,a;for(r={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},t=0,n=e.length;t<n;t++)a=e[t],null==a||isNaN(a)||(r.values.push(a),r.sum+=a,a<r.min&&(r.min=a),a>r.max&&(r.max=a),r.count+=1);return r.domain=[r.min,r.max],r.limits=function(e,n){return k.limits(r,e,n)},r},k.scale=function(e,n){var t,r,a,o,f,u,i,l,c,s,d,p,b,h,g,m,y,v,w,_,j,x,O;return s="rgb",d=k("#ccc"),g=0,u=!1,f=[0,1],h=[],b=[0,0],t=!1,a=[],p=!1,c=0,l=1,o=!1,r={},m=!0,i=1,x=function(e){var n,t,r,o,f,u;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===Ne(e)&&null!=k.brewer&&(e=k.brewer[e]||k.brewer[e.toLowerCase()]||e),"array"===Ne(e)){for(e=e.slice(0),n=r=0,o=e.length-1;0<=o?r<=o:r>=o;n=0<=o?++r:--r)t=e[n],"string"===Ne(t)&&(e[n]=k(t));for(h.length=0,n=u=0,f=e.length-1;0<=f?u<=f:u>=f;n=0<=f?++u:--u)h.push(n/(e.length-1))}return j(),a=e},w=function(e){var n,r;if(null!=t){for(r=t.length-1,n=0;n<r&&e>=t[n];)n++;return n-1}return 0},O=function(e){return e},y=function(e){var n,r,a,o,f;return f=e,t.length>2&&(o=t.length-1,n=w(e),a=t[0]+(t[1]-t[0])*(0+.5*g),r=t[o-1]+(t[o]-t[o-1])*(1-.5*g),f=c+(t[n]+.5*(t[n+1]-t[n])-a)/(r-a)*(l-c)),f},_=function(e,n){var o,f,u,p,g,y,v,_;if(null==n&&(n=!1),isNaN(e))return d;if(n?_=e:t&&t.length>2?(o=w(e),_=o/(t.length-2)):_=l!==c?(e-c)/(l-c):1,n||(_=O(_)),1!==i&&(_=ae(_,i)),_=b[0]+_*(1-b[0]-b[1]),_=Math.min(1,Math.max(0,_)),p=Math.floor(1e4*_),m&&r[p])f=r[p];else{if("array"===Ne(a))for(u=g=0,v=h.length-1;0<=v?g<=v:g>=v;u=0<=v?++g:--g){if(y=h[u],_<=y){f=a[u];break}if(_>=y&&u===h.length-1){f=a[u];break}if(_>y&&_<h[u+1]){_=(_-y)/(h[u+1]-y),f=k.interpolate(a[u],a[u+1],_,s);break}}else"function"===Ne(a)&&(f=a(_));m&&(r[p]=f)}return f},j=function(){return r={}},x(e),v=function(e){var n;return n=k(_(e)),p&&n[p]?n[p]():n},v.classes=function(e){var n;return null!=e?("array"===Ne(e)?(t=e,f=[e[0],e[e.length-1]]):(n=k.analyze(f),t=0===e?[n.min,n.max]:k.limits(n,"e",e)),v):t},v.domain=function(e){var n,t,r,o,u,i,s;if(!arguments.length)return f;if(c=e[0],l=e[e.length-1],h=[],r=a.length,e.length===r&&c!==l)for(u=0,o=e.length;u<o;u++)t=e[u],h.push((t-c)/(l-c));else for(n=s=0,i=r-1;0<=i?s<=i:s>=i;n=0<=i?++s:--s)h.push(n/(r-1));return f=[c,l],v},v.mode=function(e){return arguments.length?(s=e,j(),v):s},v.range=function(e,n){return x(e,n),v},v.out=function(e){return p=e,v},v.spread=function(e){return arguments.length?(g=e,v):g},v.correctLightness=function(e){return null==e&&(e=!0),o=e,j(),O=o?function(e){var n,t,r,a,o,f,u,i,l;for(n=_(0,!0).lab()[0],t=_(1,!0).lab()[0],u=n>t,r=_(e,!0).lab()[0],o=n+(t-n)*e,a=r-o,i=0,l=1,f=20;Math.abs(a)>.01&&f-- >0;)!function(){return u&&(a*=-1),a<0?(i=e,e+=.5*(l-e)):(l=e,e+=.5*(i-e)),r=_(e,!0).lab()[0],a=r-o}();return e}:function(e){return e},v},v.padding=function(e){return null!=e?("number"===Ne(e)&&(e=[e,e]),b=e,v):b},v.colors=function(n,r){var o,u,i,l,c,s,d,p;if(arguments.length<2&&(r="hex"),c=[],0===arguments.length)c=a.slice(0);else if(1===n)c=[v(.5)];else if(n>1)u=f[0],o=f[1]-u,c=function(){s=[];for(var e=0;0<=n?e<n:e>n;0<=n?e++:e--)s.push(e);return s}.apply(this).map(function(e){return v(u+e/(n-1)*o)});else{if(e=[],d=[],t&&t.length>2)for(i=p=1,l=t.length;1<=l?p<l:p>l;i=1<=l?++p:--p)d.push(.5*(t[i-1]+t[i]));else d=f;c=d.map(function(e){return v(e)})}return k[r]&&(c=c.map(function(e){return e[r]()})),c},v.cache=function(e){return null!=e?(m=e,v):m},v.gamma=function(e){return null!=e?(i=e,v):i},v},null==k.scales&&(k.scales={}),k.scales.cool=function(){return k.scale([k.hsl(180,1,.9),k.hsl(250,.7,.4)])},k.scales.hot=function(){return k.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},k.analyze=function(e,n,t){var r,a,o,f,u,i,l;if(u={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0},null==t&&(t=function(){return!0}),r=function(e){null==e||isNaN(e)||(u.values.push(e),u.sum+=e,e<u.min&&(u.min=e),e>u.max&&(u.max=e),u.count+=1)},l=function(e,a){if(t(e,a))return r(null!=n&&"function"===Ne(n)?n(e):null!=n&&"string"===Ne(n)||"number"===Ne(n)?e[n]:e)},"array"===Ne(e))for(f=0,o=e.length;f<o;f++)i=e[f],l(i);else for(a in e)i=e[a],l(i,a);return u.domain=[u.min,u.max],u.limits=function(e,n){return k.limits(u,e,n)},u},k.limits=function(e,n,t){var r,a,o,f,u,i,l,c,s,d,p,h,g,m,y,v,w,_,j,x,O,M,N,A,P,C,R,q,D,S,z,E,B,U,T,F,G,H,I,V,Y,X,$,K,Z,J,ee,ne,te,re,oe,fe,ue,ie,le,ce;if(null==n&&(n="equal"),null==t&&(t=7),"array"===Ne(e)&&(e=k.analyze(e)),P=e.min,W=e.max,oe=e.sum,le=e.values.sort(function(e,n){return e-n}),1===t)return[P,W];if(N=[],"c"===n.substr(0,1)&&(N.push(P),N.push(W)),"e"===n.substr(0,1)){for(N.push(P),x=z=1,T=t-1;1<=T?z<=T:z>=T;x=1<=T?++z:--z)N.push(P+x/t*(W-P));N.push(W)}else if("l"===n.substr(0,1)){if(P<=0)throw"Logarithmic scales are only possible for values > 0";for(C=Math.LOG10E*Q(P),A=Math.LOG10E*Q(W),N.push(P),x=ce=1,F=t-1;1<=F?ce<=F:ce>=F;x=1<=F?++ce:--ce)N.push(ae(10,C+x/t*(A-C)));N.push(W)}else if("q"===n.substr(0,1)){for(N.push(P),x=r=1,X=t-1;1<=X?r<=X:r>=X;x=1<=X?++r:--r)E=(le.length-1)*x/t,B=L(E),B===E?N.push(le[B]):(U=E-B,N.push(le[B]*(1-U)+le[B+1]*U));N.push(W)}else if("k"===n.substr(0,1)){for(q=le.length,m=new Array(q),_=new Array(t),re=!0,D=0,v=null,v=[],v.push(P),x=a=1,$=t-1;1<=$?a<=$:a>=$;x=1<=$?++a:--a)v.push(P+x/t*(W-P));for(v.push(W);re;){for(O=o=0,K=t-1;0<=K?o<=K:o>=K;O=0<=K?++o:--o)_[O]=0;for(x=f=0,Z=q-1;0<=Z?f<=Z:f>=Z;x=0<=Z?++f:--f){for(ie=le[x],R=Number.MAX_VALUE,O=u=0,J=t-1;0<=J?u<=J:u>=J;O=0<=J?++u:--u)j=b(v[O]-ie),j<R&&(R=j,y=O);_[y]++,m[x]=y}for(S=new Array(t),O=i=0,ee=t-1;0<=ee?i<=ee:i>=ee;O=0<=ee?++i:--i)S[O]=null;for(x=l=0,ne=q-1;0<=ne?l<=ne:l>=ne;x=0<=ne?++l:--l)w=m[x],null===S[w]?S[w]=le[x]:S[w]+=le[x];for(O=c=0,te=t-1;0<=te?c<=te:c>=te;O=0<=te?++c:--c)S[O]*=1/_[O];for(re=!1,O=s=0,G=t-1;0<=G?s<=G:s>=G;O=0<=G?++s:--s)if(S[O]!==v[x]){re=!0;break}v=S,D++,D>200&&(re=!1)}for(M={},O=d=0,H=t-1;0<=H?d<=H:d>=H;O=0<=H?++d:--d)M[O]=[];for(x=p=0,I=q-1;0<=I?p<=I:p>=I;x=0<=I?++p:--p)w=m[x],M[w].push(le[x]);for(fe=[],O=h=0,V=t-1;0<=V?h<=V:h>=V;O=0<=V?++h:--h)fe.push(M[O][0]),fe.push(M[O][M[O].length-1]);for(fe=fe.sort(function(e,n){return e-n}),N.push(fe[0]),x=g=1,Y=fe.length-1;g<=Y;x=g+=2)ue=fe[x],isNaN(ue)||N.indexOf(ue)!==-1||N.push(ue)}return N},q=function(e,n,t){var r,a,o,u;return r=Ae(arguments),e=r[0],n=r[1],t=r[2],isNaN(e)&&(e=0),e/=360,e<1/3?(a=(1-n)/3,u=(1+n*O(i*e)/O(f-i*e))/3,o=1-(a+u)):e<2/3?(e-=1/3,u=(1-n)/3,o=(1+n*O(i*e)/O(f-i*e))/3,a=1-(u+o)):(e-=2/3,o=(1-n)/3,a=(1+n*O(i*e)/O(f-i*e))/3,u=1-(o+a)),u=K(t*u*3),o=K(t*o*3),a=K(t*a*3),[255*u,255*o,255*a,r.length>3?r[3]:1]},le=function(){var e,n,t,r,a,o,f,u;return f=Ae(arguments),o=f[0],n=f[1],e=f[2],i=2*Math.PI,o/=255,n/=255,e/=255,a=Math.min(o,n,e),r=(o+n+e)/3,u=1-a/r,0===u?t=0:(t=(o-n+(o-e))/2,t/=Math.sqrt((o-n)*(o-n)+(o-e)*(n-e)),t=Math.acos(t),e>n&&(t=i-t),t/=i),[360*t,u,r]},k.hsi=function(){return function(e,n,t){t.prototype=e.prototype;var r=new t,a=e.apply(r,n);return Object(a)===a?a:r}(e,Re.call(arguments).concat(["hsi"]),function(){})},d.hsi=q,e.prototype.hsi=function(){return le(this._rgb)},B=function(e,n,t,r){var a,o,f,u,i,l,c,s,d,p,b,h,g;return"hsl"===r?(h=e.hsl(),g=n.hsl()):"hsv"===r?(h=e.hsv(),g=n.hsv()):"hcg"===r?(h=e.hcg(),g=n.hcg()):"hsi"===r?(h=e.hsi(),g=n.hsi()):"lch"!==r&&"hcl"!==r||(r="hcl",h=e.hcl(),g=n.hcl()),"h"===r.substr(0,1)&&(f=h[0],p=h[1],l=h[2],u=g[0],b=g[1],c=g[2]),isNaN(f)||isNaN(u)?isNaN(f)?isNaN(u)?o=Number.NaN:(o=u,1!==l&&0!==l||"hsv"===r||(d=b)):(o=f,1!==c&&0!==c||"hsv"===r||(d=p)):(a=u>f&&u-f>180?u-(f+360):u<f&&f-u>180?u+360-f:u-f,o=f+t*a),null==d&&(d=p+t*(b-p)),i=l+t*(c-l),s=k[r](o,d,i)},p=p.concat(function(){var e,n,t,r;for(t=["hsv","hsl","hsi","hcl","lch","hcg"],r=[],n=0,e=t.length;n<e;n++)J=t[n],r.push([J,B]);return r}()),F=function(e,n,t,r){var a,o;return a=e.num(),o=n.num(),k.num(a+(o-a)*t,"num")},p.push(["num",F]),U=function(n,t,r,a){var o,f,u;return f=n.lab(),u=t.lab(),o=new e(f[0]+r*(u[0]-f[0]),f[1]+r*(u[1]-f[1]),f[2]+r*(u[2]-f[2]),a)},p.push(["lab",U])}).call(this)},{}],2:[function(e,n,t){"use strict";var r=String.prototype.replace,a=/%20/g;n.exports={"default":"RFC3986",formatters:{RFC1738:function(e){return r.call(e,a,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},{}],3:[function(e,n,t){"use strict";var r=e("./stringify"),a=e("./parse"),o=e("./formats");n.exports={formats:o,parse:a,stringify:r}},{"./formats":2,"./parse":4,"./stringify":5}],4:[function(e,n,t){"use strict";var r=e("./utils"),a=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},f=function(e,n){for(var t={},r=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,f=n.parameterLimit===1/0?void 0:n.parameterLimit,u=r.split(n.delimiter,f),i=0;i<u.length;++i){var l,c,s=u[i],d=s.indexOf("]="),p=d===-1?s.indexOf("="):d+1;p===-1?(l=n.decoder(s,o.decoder),c=n.strictNullHandling?null:""):(l=n.decoder(s.slice(0,p),o.decoder),c=n.decoder(s.slice(p+1),o.decoder)),a.call(t,l)?t[l]=[].concat(t[l]).concat(c):t[l]=c}return t},u=function(e,n,t){for(var r=n,a=e.length-1;a>=0;--a){var o,f=e[a];if("[]"===f)o=[],o=o.concat(r);else{o=t.plainObjects?Object.create(null):{};var u="["===f.charAt(0)&&"]"===f.charAt(f.length-1)?f.slice(1,-1):f,i=parseInt(u,10);!isNaN(i)&&f!==u&&String(i)===u&&i>=0&&t.parseArrays&&i<=t.arrayLimit?(o=[],o[i]=r):o[u]=r}r=o}return r},i=function(e,n,t){if(e){var r=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,f=/(\[[^[\]]*])/g,i=o.exec(r),l=i?r.slice(0,i.index):r,c=[];if(l){if(!t.plainObjects&&a.call(Object.prototype,l)&&!t.allowPrototypes)return;c.push(l)}for(var s=0;null!==(i=f.exec(r))&&s<t.depth;){if(s+=1,!t.plainObjects&&a.call(Object.prototype,i[1].slice(1,-1))&&!t.allowPrototypes)return;c.push(i[1])}return i&&c.push("["+r.slice(i.index)+"]"),u(c,n,t)}};n.exports=function(e,n){var t=n?r.assign({},n):{};if(null!==t.decoder&&void 0!==t.decoder&&"function"!=typeof t.decoder)throw new TypeError("Decoder has to be a function.");if(t.ignoreQueryPrefix=t.ignoreQueryPrefix===!0,t.delimiter="string"==typeof t.delimiter||r.isRegExp(t.delimiter)?t.delimiter:o.delimiter,t.depth="number"==typeof t.depth?t.depth:o.depth,t.arrayLimit="number"==typeof t.arrayLimit?t.arrayLimit:o.arrayLimit,t.parseArrays=t.parseArrays!==!1,t.decoder="function"==typeof t.decoder?t.decoder:o.decoder,t.allowDots="boolean"==typeof t.allowDots?t.allowDots:o.allowDots,t.plainObjects="boolean"==typeof t.plainObjects?t.plainObjects:o.plainObjects,t.allowPrototypes="boolean"==typeof t.allowPrototypes?t.allowPrototypes:o.allowPrototypes,t.parameterLimit="number"==typeof t.parameterLimit?t.parameterLimit:o.parameterLimit,t.strictNullHandling="boolean"==typeof t.strictNullHandling?t.strictNullHandling:o.strictNullHandling,""===e||null===e||"undefined"==typeof e)return t.plainObjects?Object.create(null):{};for(var a="string"==typeof e?f(e,t):e,u=t.plainObjects?Object.create(null):{},l=Object.keys(a),c=0;c<l.length;++c){var s=l[c],d=i(s,a[s],t);u=r.merge(u,d,t)}return r.compact(u)}},{"./utils":6}],5:[function(e,n,t){"use strict";var r=e("./utils"),a=e("./formats"),o={brackets:function(e){return e+"[]"},indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},f=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(e){return f.call(e)},skipNulls:!1,strictNullHandling:!1},i=function l(e,n,t,a,o,f,i,c,s,d,p,b){var h=e;if("function"==typeof i)h=i(n,h);else if(h instanceof Date)h=d(h);else if(null===h){if(a)return f&&!b?f(n,u.encoder):n;h=""}if("string"==typeof h||"number"==typeof h||"boolean"==typeof h||r.isBuffer(h)){if(f){var g=b?n:f(n,u.encoder);return[p(g)+"="+p(f(h,u.encoder))]}return[p(n)+"="+p(String(h))]}var m=[];if("undefined"==typeof h)return m;var y;if(Array.isArray(i))y=i;else{var v=Object.keys(h);y=c?v.sort(c):v}for(var w=0;w<y.length;++w){var k=y[w];o&&null===h[k]||(m=Array.isArray(h)?m.concat(l(h[k],t(n,k),t,a,o,f,i,c,s,d,p,b)):m.concat(l(h[k],n+(s?"."+k:"["+k+"]"),t,a,o,f,i,c,s,d,p,b)))}return m};n.exports=function(e,n){var t=e,f=n?r.assign({},n):{};if(null!==f.encoder&&void 0!==f.encoder&&"function"!=typeof f.encoder)throw new TypeError("Encoder has to be a function.");var l="undefined"==typeof f.delimiter?u.delimiter:f.delimiter,c="boolean"==typeof f.strictNullHandling?f.strictNullHandling:u.strictNullHandling,s="boolean"==typeof f.skipNulls?f.skipNulls:u.skipNulls,d="boolean"==typeof f.encode?f.encode:u.encode,p="function"==typeof f.encoder?f.encoder:u.encoder,b="function"==typeof f.sort?f.sort:null,h="undefined"!=typeof f.allowDots&&f.allowDots,g="function"==typeof f.serializeDate?f.serializeDate:u.serializeDate,m="boolean"==typeof f.encodeValuesOnly?f.encodeValuesOnly:u.encodeValuesOnly;if("undefined"==typeof f.format)f.format=a["default"];else if(!Object.prototype.hasOwnProperty.call(a.formatters,f.format))throw new TypeError("Unknown format option provided.");var y,v,w=a.formatters[f.format];"function"==typeof f.filter?(v=f.filter,t=v("",t)):Array.isArray(f.filter)&&(v=f.filter,y=v);var k=[];if("object"!=typeof t||null===t)return"";var _;_=f.arrayFormat in o?f.arrayFormat:"indices"in f?f.indices?"indices":"repeat":"indices";var j=o[_];y||(y=Object.keys(t)),b&&y.sort(b);for(var x=0;x<y.length;++x){var O=y[x];s&&null===t[O]||(k=k.concat(i(t[O],O,j,c,s,d?p:null,v,b,h,g,w,m)))}var M=k.join(l),N=f.addQueryPrefix===!0?"?":"";return M.length>0?N+M:""}},{"./formats":2,"./utils":6}],6:[function(e,n,t){"use strict";var r=Object.prototype.hasOwnProperty,a=function(){for(var e=[],n=0;n<256;++n)e.push("%"+((n<16?"0":"")+n.toString(16)).toUpperCase());return e}(),o=function(e){for(var n;e.length;){var t=e.pop();if(n=t.obj[t.prop],Array.isArray(n)){for(var r=[],a=0;a<n.length;++a)"undefined"!=typeof n[a]&&r.push(n[a]);t.obj[t.prop]=r}}return n};t.arrayToObject=function(e,n){for(var t=n&&n.plainObjects?Object.create(null):{},r=0;r<e.length;++r)"undefined"!=typeof e[r]&&(t[r]=e[r]);return t},t.merge=function(e,n,a){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(a.plainObjects||a.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var o=e;return Array.isArray(e)&&!Array.isArray(n)&&(o=t.arrayToObject(e,a)),Array.isArray(e)&&Array.isArray(n)?(n.forEach(function(n,o){r.call(e,o)?e[o]&&"object"==typeof e[o]?e[o]=t.merge(e[o],n,a):e.push(n):e[o]=n}),e):Object.keys(n).reduce(function(e,o){var f=n[o];return r.call(e,o)?e[o]=t.merge(e[o],f,a):e[o]=f,e},o)},t.assign=function(e,n){return Object.keys(n).reduce(function(e,t){return e[t]=n[t],e},e)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(n){return e}},t.encode=function(e){if(0===e.length)return e;for(var n="string"==typeof e?e:String(e),t="",r=0;r<n.length;++r){var o=n.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?t+=n.charAt(r):o<128?t+=a[o]:o<2048?t+=a[192|o>>6]+a[128|63&o]:o<55296||o>=57344?t+=a[224|o>>12]+a[128|o>>6&63]+a[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&n.charCodeAt(r)),t+=a[240|o>>18]+a[128|o>>12&63]+a[128|o>>6&63]+a[128|63&o])}return t},t.compact=function(e){for(var n=[{obj:{o:e},prop:"o"}],t=[],r=0;r<n.length;++r)for(var a=n[r],f=a.obj[a.prop],u=Object.keys(f),i=0;i<u.length;++i){var l=u[i],c=f[l];"object"==typeof c&&null!==c&&t.indexOf(c)===-1&&(n.push({obj:f,prop:l}),t.push(c))}return o(n)},t.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e);
},t.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}],7:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),f=e("./ns"),u=(r(f),e("../module/config")),i=e("../module/util"),l=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.initialize(n)}return o(e,[{key:"initialize",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.stageElm=n.stageElm,r=(this.fftSize=n.fftSize,this.sampleRate=n.sampleRate,this.context=t.getContext("2d"),$("[data-js-gain]"));this.gain=Number(r.val()),r.on("input",function(n){e.gain=Number($(n.target).val())})}},{key:"draw",value:function(e){for(var n=e.frequencyData,t=e.timeDomainData,r=this.context,a=this.hue(n),o=(0,i.getHsvColor)(a||0,.8,.5).alpha(.3).css(),f=[],l=this.gain,c=u.kernelLen,s=t.length-u.kernelLen;c<s;c++){for(var d=0,p=-u.kernelLen;p<=u.kernelLen;p++)d+=(0,i.inv)(p)*((0,i.normalize)(t[c+p])||0);var b=(0,i.normalize)(t[c]),h=d,g=u.width/2+u.amp*b*l,m=u.height/2-u.amp*h*l,y=(0,i.norm)(b,h);f.push({re:b,im:h,x:g,y:m,hue:a,volume:y,amp:u.amp})}var v=_.meanBy(f,"volume"),w=(Math.min(10*Math.pow(v,2),1),{x:null,y:null});r.fillStyle="#fff",r.fillRect(0,0,u.width,u.height),f.forEach(function(e){null!=w.x&&null!=w.y&&(r.beginPath(),r.fillStyle=o,r.moveTo(u.width/2,u.height/2),r.lineTo(w.x,w.y),r.lineTo(e.x,e.y),r.lineTo(u.width/2,u.height/2),r.fill()),w.x=e.x,w.y=e.y})}},{key:"hue",value:function(e){var n=void 0,t=this.sampleRate,r=this.fftSize,a=t/r,o=(0,i.maxIndexOf)(e)*a,f=243,u=Math.log(o/f)/Math.log(2);return n=360*(0,i.mod)(u,1)}}]),e}();t["default"]=l},{"../module/config":8,"../module/util":12,"./ns":10}],8:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.kernelLen=127,t.amp=100,t.width=256,t.height=256},{}],9:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),f=e("./router"),u=r(f),i=function(){function e(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),console.log("Hello, world!"),this.initialize(),console.log("Thanks, world!")}return o(e,[{key:"initialize",value:function(){var e=this;$(function(){e.router=new u["default"]})}}]),e}();t["default"]=i},{"./router":11}],10:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),window.App=window.App||{};var r=window.App;t["default"]=r},{}],11:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function o(e,n){document.querySelector('body[data-page-id="'+e+'"]')&&n()}Object.defineProperty(t,"__esModule",{value:!0});var f=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),u=e("./ns"),i=r(u),l=e("../page/common"),c=r(l),s=e("../page/index"),d=r(s),p=e("../page/sub"),b=r(p),h=function(){function e(){a(this,e),this.initialize()}return f(e,[{key:"initialize",value:function(){i["default"].page=i["default"].page||{},(0,c["default"])(),o("index",d["default"]),o("sub",b["default"])}}]),e}();t["default"]=h},{"../page/common":13,"../page/index":14,"../page/sub":15,"./ns":10}],12:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getHsvColor=t.norm=t.mod=t.maxIndexOf=t.normalize=t.inv=void 0;var a=e("chroma-js"),o=r(a);e("./config"),t.inv=function(e){return 0===e?0:1/(e*Math.PI)},t.normalize=function(e){return(e-128)/128},t.maxIndexOf=function(e){return _.indexOf(e,_.max(e))},t.mod=function(e,n){return e%n+(e<0?n:0)},t.norm=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.sqrt(e*e+n*n)},t.getHsvColor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=e,a=n,f=t;return o["default"].hsl(r,a,f)}},{"./config":8,"chroma-js":1}],13:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(){var e=$("html");f["default"].isSp=!1,f["default"].isPc=!1,f["default"].isTab=!1,e.hasClass("is-sp")&&(f["default"].isSp=!0),e.hasClass("is-pc")&&(f["default"].isPc=!0),e.hasClass("is-tab")&&(f["default"].isTab=!0)}Object.defineProperty(t,"__esModule",{value:!0});var o=e("../module/ns"),f=r(o);t["default"]=function(){console.log("page common"),a()}},{"../module/ns":10}],14:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("qs"),o=r(a),f=e("../module/ns"),u=(r(f),e("../module/analytic-signal")),i=r(u);t["default"]=function(){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL;var e=function(){var e=document.querySelector("[data-js-stage]"),n=($("[data-js-btn-play]"),void 0),t=0;new AudioContext;navigator.getUserMedia&&navigator.getUserMedia({audio:!0},function(r){var a=document.querySelector("[data-js-output]"),o=URL.createObjectURL(r);a.src=o,a.volume=0;var f=new AudioContext,u=f.createMediaStreamSource(r),l=f.createAnalyser(),c=new Uint8Array(l.frequencyBinCount);n=new Uint8Array(l.frequencyBinCount),u.connect(l);var s=l.fftSize,d=f.sampleRate,p=new i["default"]({stageElm:e,fftSize:s,sampleRate:d}),b=function h(){t++,l.getByteFrequencyData(c),l.getByteTimeDomainData(n),p.draw({frequencyData:c,timeDomainData:n}),requestAnimationFrame(h)};b()},function(e){console.log("The following error occured: "+e)})},n=function(e){var n=e.audioName,t="audio/"+n+".mp3",r=document.querySelector("[data-js-stage]"),a=($("[data-js-btn-play]"),void 0),o=void 0,f=0,u=new AudioContext,l=function(e){if(!e)return void console.log("error");var n=u.createBufferSource();n.buffer=e;var t=u.createAnalyser();a=new Uint8Array(t.frequencyBinCount),o=new Uint8Array(t.frequencyBinCount),n.connect(t),t.connect(u.destination),n.start(0);var l=t.fftSize,c=u.sampleRate,s=new i["default"]({stageElm:r,fftSize:l,sampleRate:c}),d=function p(){f++,t.getByteFrequencyData(a),t.getByteTimeDomainData(o),s.draw({frequencyData:a,timeDomainData:o}),requestAnimationFrame(p)};d()},c=function(e){u.decodeAudioData(e,l,function(e){console.log("decodeAudioData error")})},s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){c(s.response)},s.send()},t=o["default"].parse(location.search.substring(1));if(t.audio){var r=t.audio;n({audioName:r})}else e()}},{"../module/analytic-signal":7,"../module/ns":10,qs:3}],15:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=e("../module/ns");r(a);t["default"]=function(){console.log("sub page")}},{"../module/ns":10}],16:[function(e,n,t){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var a=e("./module/ns"),o=r(a),f=e("./module/main"),u=r(f);o["default"].main=new u["default"]},{"./module/main":9,"./module/ns":10}]},{},[16]);